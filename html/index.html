<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flv.js/1.3.2/flv.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="https://unpkg.com/mqtt@5.3.3/dist/mqtt.min.js"></script>
<script src="mpegts.js"></script>
<script src="mqtt.js"></script>
<script src="forecast.js"></script>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css2?family=B612">
</head>
<body>
<datalist id="markers">
	<option value="0"></option>
	<option value="64"></option>
	<option value="128"></option>
	<option value="190"></option>
	<option value="255"></option>
</datalist>

<!-- Major displays at the top of the screen -->
<div id="top">
	<div id="clock" class="page">
		<div id=time>HH:MM:SS</div>
		<div id=date>YYYY-MM-DD</div>
	</div>
	<div id="weather" class="page" style="display: none;">
		<button style="position: absolute; right: 800px; top: 0;" onclick="window.location.reload()">Reload page</button>
		<span class="mqtt" topic="weather/current#main.temp" format="roundfunc(1)">XX.YY</span>&deg;C
		(Feels like <span class="mqtt" topic="weather/current#main.feels_like" format="roundfunc(1)">xxx</span>&deg;C)
		<br/>
		Rain
		<span class="mqtt" topic="weather/current#rain['1h']" format="roundfunc(1)" optional default=0>xxx</span>mm
		<br/>
		Wind
		<span class="mqtt" topic="weather/current#wind.deg">xxx</span>&deg; @ 
		<span class="mqtt" topic="weather/current#wind.speed">xxx</span> m/s
		<br/>
		 <span class="mqtt" topic="weather/current#sys.sunrise" format="localtime">XX:XX</span> Sunrise / 
		<span class="mqtt" topic="weather/current#sys.sunset" format="localtime">XX:XX</span> Sunset
		<span id="weather_plot" class="mqtt" topic="weather/forecast" update="weather_plot"></span>

	</div>
	<div id="lights" class="page" style="display: none;">
		<!-- will be filled in by the script below -->
	</div>
	<div id="macros" class="page" style="display: none;">
		<!-- will be filled in by the script below -->
	</div>
</div>
<div id="video_page" class="page" style="display: none; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%;">
	<!-- will be filled in by the full screen script below -->
</div>

<!-- Selector buttons at the bottom of the screen -->
<table width="100%" height="25%">
<tr>
<td width="25%" id="video_button" class="page-selector">
	<video id="video" class="center" width="100%" height="100%" onclick="video_resize()" />
</td>
<td width="25%" onclick="page_show('lights')" class="page-selector">
	<span class="mqtt" topic="p1meter/sensor/actual_consumption_sensor/state" format="(x)=>(x/1000).toFixed(1)">???</span> kW
</td>
<td width="25%" onclick="page_show('weather')" class="page-selector">
	<span class="mqtt" topic="weather/current#main.temp" format="roundfunc(1)">XX</span>&deg;C</td>
<td width="25%" onclick="page_show('macros')" class="page-selector">Macros</td>
</tr>
</table>


<!-- <div id="lights" style="width: 800px; height: 400px; background: #111; white-space: nowrap;" /> -->

<script src="intercom.js"></script>
</html>
